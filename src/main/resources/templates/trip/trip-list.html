<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Scheduled Trips</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-DQvkBjpPgn7RC31MCQoOeC9TI2kdqa4+BSgNMNj8v77fdC77Kj5zpWFTJaaAoMbC" crossorigin="anonymous">
</head>
<body class="bg-light">

<!-- ✅ Offcanvas Dark Navbar -->
<nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/user">Home</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar"
            aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
            aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Menu</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                    <li class="nav-item"><a class="nav-link" href="/user/passengers">Passengers</a></li>
                    <li class="nav-item"><a class="nav-link" href="/user/passengers/form">Add Passenger</a></li>
                    <li class="nav-item"><a class="nav-link" href="/public/search">Trip Search</a></li>
                    <li class="nav-item"><a class="nav-link" href="/public/signup">Sign up</a></li>
                    <li class="nav-item"><a class="nav-link" href="/public/login">Log in</a></li>
                    <li class="nav-item">
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="btn btn-danger btn-sm">Log out</button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- ✅ Page Content -->
<div class="container mt-5 pt-5">
    <div class="card shadow">
        <div class="card-body">
            <h2 class="card-title mb-4">Scheduled Trips</h2>

            <a href="/admin/scheduleTrip/create" class="btn btn-primary mb-3">Create New Trip</a>

            <div class="table-responsive">
                <table class="table table-bordered table-striped table-hover text-center align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Bus</th>
                            <th>Route</th>
                            <th>Seats</th>
                            <th>Cost/Km</th>
                            <th>Total Distance Km</th>
                            <th>Trip Date</th>
                            <th>Trip Time</th>
                            <th>Trip Ended</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="trip : ${trips}">
                            <td th:text="${trip.id}"></td>
                            <td th:text="${trip.bus.busNumber}"></td>
                            <td th:text="${trip.route.routeName}"></td>
                            <td th:text="${trip.availableSeats}"></td>
                            <td th:text="${trip.costPerKm}"></td>
                            <td th:text="${trip.route.totalDistance}"></td>
                            <td th:text="${trip.tripDate}"></td>
                            <td th:text="${trip.tripTime}"></td>
                            <td>
                                <span th:if="${trip.tripEnd == 0}" class="badge bg-warning text-dark">Not Completed</span>
                                <span th:if="${trip.tripEnd == 1}" class="badge bg-success">Completed</span>
                            </td>
                            <td>
                                <a th:href="@{/admin/scheduleTrip/edit/{id}(id=${trip.id})}" class="btn btn-sm btn-warning">Edit</a>
                                <a th:href="@{/admin/scheduleTrip/delete/{id}(id=${trip.id})}" class="btn btn-sm btn-danger">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- ✅ Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YUe2LzesAfftltw+PEaao2tjU/QATaW/rOitAq67e0CT0Zi2VVRL0oC4+gAaeBKu"
    crossorigin="anonymous"></script>
</body>
</html>
